<div class="events-filter-panel">
  <div class="events-filter-header">
    <span class="events-filter-title">FILTER</span>
    <button type="button" class="events-filter-close" (click)="onClose()" aria-label="Close filters">
      Ã—
    </button>
  </div>

  <!-- Start Date -->
  <div class="events-filter-group" *ngIf="showDateRange">
    <label class="events-filter-label">Start Date</label>
    <div class="events-filter-row">
      <div class="events-filter-input-with-icon">
        <img src="assets/calendar-icon.svg" alt="calendar" class="events-filter-input-icon" />
        <input type="date" class="events-filter-input" [(ngModel)]="model.startDate"   (ngModelChange)="onCriteriaChanged()" />
      </div>
      <div class="events-filter-time-wrapper">
        <input type="time" class="events-filter-time-input" [(ngModel)]="model.startTime"   (ngModelChange)="onCriteriaChanged()" />
        <span class="events-filter-time-suffix">
          {{ +model.startTime.split(':')[0] < 12 ? 'AM' : 'PM' }}
        </span>
      </div>
    </div>
  </div>

  <!-- End Date -->
  <div class="events-filter-group" *ngIf="showDateRange">
    <label class="events-filter-label">End Date</label>
    <div class="events-filter-row">
      <div class="events-filter-input-with-icon">
        <img src="assets/calendar-icon.svg" alt="calendar" class="events-filter-input-icon" />
        <input type="date" class="events-filter-input" [(ngModel)]="model.endDate"  (ngModelChange)="onCriteriaChanged()"  />
      </div>
      <div class="events-filter-time-wrapper">
        <input type="time" class="events-filter-time-input" [(ngModel)]="model.endTime"  (ngModelChange)="onCriteriaChanged()"  />
        <span class="events-filter-time-suffix">
          {{ +model.endTime.split(':')[0] < 12 ? 'AM' : 'PM' }}
        </span>
      </div>
    </div>
  </div>

  <!-- Duration slider -->
  <div class="events-filter-group" *ngIf="showDateRange">
    <label class="events-filter-label">Duration</label>
    <div class="events-filter-duration-row">
      <span class="events-filter-duration-min">00:00</span>

      <div class="duration-slider">
        <div class="duration-slider-track"></div>

        <div class="duration-slider-fill"
          [ngStyle]="{ left: minPercent + '%', width: (maxPercent - minPercent) + '%' }">
        </div>

        <input type="range" min="0" max="120"
          class="duration-slider-input duration-slider-input-min"
          [(ngModel)]="model.minDuration"
          (input)="onMinDurationChange($event)" />

        <input type="range" min="0" max="120"
          class="duration-slider-input duration-slider-input-max"
          [(ngModel)]="model.maxDuration"
          (input)="onMaxDurationChange($event)" />
      </div>

      <span class="events-filter-duration-max">120:00</span>
    </div>

    <div class="duration-display-box">
      <span class="duration-display-value">{{ formatDuration(model.minDuration) }}</span>
      <span class="duration-display-separator">to</span>
      <span class="duration-display-value">{{ formatDuration(model.maxDuration) }}</span>
    </div>
  </div>

  <!-- Site -->
  <div class="events-filter-group">
    <label class="events-filter-label">Select Site</label>
    <select class="events-filter-select" [(ngModel)]="model.site"  (ngModelChange)="onCriteriaChanged()" >
      <option value="All">All</option>
      <option *ngFor="let s of sites" [value]="s">{{ s }}</option>
    </select>
  </div>

  <!-- Camera -->
  <div class="events-filter-group">
    <label class="events-filter-label">Select Camera</label>
    <select class="events-filter-select" [(ngModel)]="model.camera"  (ngModelChange)="onCriteriaChanged()" >
      <option value="All">All</option>
      <option *ngFor="let c of cameras" [value]="c">{{ c }}</option>
    </select>
  </div>

  <!-- Action Tag (you use eventTypes array) -->
  <div class="events-filter-group">
    <label class="events-filter-label">Select Action Tag</label>
    <select class="events-filter-select" [(ngModel)]="model.eventType"  (ngModelChange)="onCriteriaChanged()" >
      <option value="All">All</option>
      <option *ngFor="let e of eventTypes" [value]="e">{{ e }}</option>
    </select>
  </div>

  <!-- Alert Type -->
  <div class="events-filter-group">
    <label class="events-filter-label">Select Alert Type</label>
    <select class="events-filter-select" [(ngModel)]="model.consoleType"  (ngModelChange)="onCriteriaChanged()" >
      <option value="All">All</option>
      <option *ngFor="let c of consoleTypes" [value]="c">{{ c }}</option>
    </select>
  </div>

  <!-- Employee -->
  <div class="events-filter-group">
    <label class="events-filter-label">Select Employee</label>
    <select class="events-filter-select" [(ngModel)]="model.employee" (ngModelChange)="onCriteriaChanged()" >
      <option value="All">All</option>
      <option *ngFor="let emp of employees" [value]="emp">{{ emp }}</option>
    </select>
  </div>

  <!-- Queue Name -->
  <div class="events-filter-group" *ngIf="queuesChecked || consolesChecked">
    <label class="events-filter-label">Select Queue Name</label>
    <select class="events-filter-select" [(ngModel)]="model.queueName"  (ngModelChange)="onCriteriaChanged()" >
      <option value="All">All</option>
      <option *ngFor="let q of queues" [value]="q">{{ q }}</option>
    </select>
  </div>

  <!-- Queue Level -->
  <div class="events-filter-group" *ngIf="queuesChecked || consolesChecked">
    <label class="events-filter-label">Select Queue Level</label>
    <select class="events-filter-select" [(ngModel)]="model.queueLevel"  (ngModelChange)="onCriteriaChanged()" >
      <option value="All">All</option>
      <option *ngFor="let lvl of queueLevels" [value]="lvl">{{ lvl }}</option>
    </select>
  </div>

  <!-- Footer buttons -->
  <div class="events-filter-actions">
    <button type="button" class="events-filter-btn reset-btn" (click)="onReset()">RESET</button>
    <button type="button" class="events-filter-btn apply-btn" (click)="onApply()">APPLY</button>
  </div>
</div>
